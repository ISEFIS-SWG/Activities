{"ast":null,"code":"var _jsxFileName = \"/Users/pratyas/Desktop/Mobile App Training/MymobileApp/TOTRun/src/pages/Tab4.tsx\";\nimport React, { useState } from 'react';\nimport { locate } from \"ionicons/icons\";\nimport { Plugins } from \"@capacitor/core\";\nimport GoogleMapReact from 'google-map-react';\nimport { IonPage, IonHeader, IonToolbar, IonTitle, IonButton, IonIcon, IonButtons, IonContent, IonLoading, useIonViewDidEnter } from '@ionic/react';\nconst {\n  Geolocation\n} = Plugins;\n\nconst Tab4 = props => {\n  const [showLoading, setShowLoading] = useState(false);\n  const [positionReady, setPositionReady] = useState(false);\n  const [currentPosition, setCurrentPosition] = useState({\n    lat: 0,\n    lng: 0,\n    acc: 0,\n    time: 0\n  });\n  const [startPosition, setstartPosition] = useState({\n    lat: 0,\n    lng: 0,\n    acc: 0,\n    time: 0\n  });\n  const [distance, setdistance] = useState({\n    distance: 0\n  });\n\n  let onMapLoad = (map, mapsAPI) => {\n    let directionsService = new mapsAPI.DirectionsService();\n    let directionsRenderer = new mapsAPI.DirectionsRenderer();\n    directionsRenderer.setMap(map); // let start = { lat: 9.1106153, lng: 99.3018452 };\n\n    let start = {\n      lat: startPosition.lat,\n      lng: startPosition.lng\n    };\n    let end = {\n      lat: 6.9506242,\n      lng: 100.41277989999999\n    }; // let end = { lat : currentPosition.lat,lng : currentPosition.lng}\n\n    let request = {\n      origin: start,\n      destination: end,\n      travelMode: 'WALKING'\n    };\n    directionsService.route(request, function (result, status) {\n      if (status == 'OK') {\n        directionsRenderer.setDirections(result);\n        let route = result.routes[0];\n\n        for (let i = 0; i < route.legs.length; i++) {\n          console.log('directionService', route.legs[i].distance.text);\n        }\n\n        console.log('Distance :', route.legs.length);\n      }\n    });\n    let trafficLayer = new mapsAPI.TrafficLayer();\n  };\n\n  useIonViewDidEnter(() => {\n    startGetGPS(); // startDistance();\n  });\n\n  const getDirection = async () => {\n    console.log('Getting geolocation....');\n    setShowLoading(true);\n    let position2 = await Geolocation.getCurrentPosition();\n    setShowLoading(false);\n    setPositionReady(true);\n  };\n\n  const startGetGPS = async () => {\n    console.log('Getting geolocation....startGetGPS');\n    setShowLoading(true);\n    let position1 = await Geolocation.getCurrentPosition();\n    setShowLoading(false);\n    setPositionReady(true);\n    setstartPosition({\n      lat: position1.coords.latitude,\n      lng: position1.coords.longitude,\n      acc: position1.coords.accuracy,\n      time: position1.timestamp\n    });\n    setCurrentPosition({\n      lat: position1.coords.latitude,\n      lng: position1.coords.longitude,\n      acc: position1.coords.accuracy,\n      time: position1.timestamp\n    });\n    let lat = position1.coords.latitude;\n    let lng = position1.coords.longitude;\n    let datetime = new Date(position1.timestamp);\n    console.log('Current startGetGPS', lat, lng, datetime);\n  };\n\n  const startDistance = async () => {\n    console.log('Getting geolocation....startDistance');\n    setShowLoading(true);\n    let position1 = await Geolocation.getCurrentPosition();\n    setShowLoading(false);\n    setPositionReady(true);\n    setCurrentPosition({\n      lat: position1.coords.latitude,\n      lng: position1.coords.longitude,\n      acc: position1.coords.accuracy,\n      time: position1.timestamp\n    });\n    let lat = position1.coords.latitude;\n    let lng = position1.coords.longitude;\n    console.log('Start timestamp', new Date(startPosition.time)); // console.log('Current startDistance', position1);\n  };\n\n  const getDistance = async () => {\n    console.log('Getting geolocation....getDistance');\n    setShowLoading(true);\n    let position1 = await Geolocation.getCurrentPosition();\n    setShowLoading(false);\n    setPositionReady(true);\n    setCurrentPosition({\n      lat: position1.coords.latitude,\n      lng: position1.coords.longitude,\n      acc: position1.coords.accuracy,\n      time: position1.timestamp\n    });\n    console.log('Stop timestamp', new Date(currentPosition.time));\n    let googleMap;\n\n    if (positionReady) {\n      googleMap = React.createElement(GoogleMapReact, {\n        bootstrapURLKeys: {\n          key: 'AIzaSyATDm0MlJIxUXoIU56PIOk3aY26XXs6ul0'\n        },\n        defaultCenter: currentPosition,\n        defaultZoom: 15,\n        yesIWantToUseGoogleMapApiInternals: true,\n        onGoogleApiLoaded: ({\n          map,\n          maps\n        }) => {\n          onMapLoad(map, maps);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      });\n    }\n  };\n\n  let watch1;\n\n  let startWatchGPS = () => {\n    console.log('Watching geolocation...');\n    setShowLoading(true);\n    watch1 = Geolocation.watchPosition({}, (position, error) => {\n      console.log('new position', position);\n      setShowLoading(false);\n      setPositionReady(true);\n      setCurrentPosition({\n        lat: position.coords.latitude,\n        lng: position.coords.longitude,\n        acc: position.coords.accuracy,\n        time: position.timestamp\n      });\n    });\n  };\n\n  let startTextJSX;\n\n  if (positionReady == true) {\n    startTextJSX = React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, currentPosition.lat, \",\", currentPosition.lng, \",\", currentPosition.time);\n  } else {\n    startTextJSX = React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, \"\\u0E01\\u0E14\\u0E1B\\u0E38\\u0E48\\u0E21\\u0E1A\\u0E19\\u0E02\\u0E27\\u0E32\\u0E40\\u0E1E\\u0E37\\u0E48\\u0E2D\\u0E23\\u0E30\\u0E1A\\u0E38\\u0E1E\\u0E34\\u0E01\\u0E31\\u0E14\\u0E02\\u0E2D\\u0E07\\u0E40\\u0E04\\u0E23\\u0E37\\u0E48\\u0E2D\\u0E07\");\n  }\n\n  let stopTextJSX;\n\n  if (positionReady == true) {\n    stopTextJSX = React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, \"stopTextJSX longtitude = \", currentPosition.lat, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }), \"latitude = \", currentPosition.lng, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }), \"timestamp = \", currentPosition.time);\n  } else {\n    stopTextJSX = React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, \"\\u0E01\\u0E14\\u0E1B\\u0E38\\u0E48\\u0E21\\u0E1A\\u0E19\\u0E02\\u0E27\\u0E32\\u0E40\\u0E1E\\u0E37\\u0E48\\u0E2D\\u0E23\\u0E30\\u0E1A\\u0E38\\u0E1E\\u0E34\\u0E01\\u0E31\\u0E14\\u0E02\\u0E2D\\u0E07\\u0E40\\u0E04\\u0E23\\u0E37\\u0E48\\u0E2D\\u0E07\");\n  }\n\n  let googleMap;\n\n  if (positionReady) {\n    googleMap = React.createElement(GoogleMapReact, {\n      bootstrapURLKeys: {\n        key: 'AIzaSyATDm0MlJIxUXoIU56PIOk3aY26XXs6ul0'\n      },\n      defaultCenter: currentPosition,\n      defaultZoom: 15,\n      yesIWantToUseGoogleMapApiInternals: true,\n      onGoogleApiLoaded: ({\n        map,\n        maps\n      }) => {\n        onMapLoad(map, maps);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    });\n  }\n\n  return React.createElement(IonPage, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178\n    },\n    __self: this\n  }, React.createElement(IonHeader, {\n    translucent: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179\n    },\n    __self: this\n  }, React.createElement(IonToolbar, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180\n    },\n    __self: this\n  }, React.createElement(IonTitle, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181\n    },\n    __self: this\n  }, \"Easy Running#1\"), React.createElement(IonButtons, {\n    slot: \"end\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182\n    },\n    __self: this\n  }, React.createElement(IonButton, {\n    onClick: getDirection,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183\n    },\n    __self: this\n  }, React.createElement(IonIcon, {\n    icon: locate,\n    slot: \"icon-only\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184\n    },\n    __self: this\n  })), React.createElement(IonButton, {\n    expand: \"full\",\n    color: \"primary\",\n    shape: \"round\",\n    slot: \"start\",\n    size: \"large\",\n    onClick: startDistance,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186\n    },\n    __self: this\n  }, \"Start\"), React.createElement(IonButton, {\n    expand: \"block\",\n    color: \"secondary\",\n    shape: \"round\",\n    slot: \"start\",\n    size: \"large\",\n    onClick: () => {\n      getDistance();\n      props.history.push('/Tab2');\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187\n    },\n    __self: this\n  }, \"Stop\")))), React.createElement(IonContent, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197\n    },\n    __self: this\n  }, React.createElement(\"body\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    style: {\n      height: '90vh',\n      width: '100%'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199\n    },\n    __self: this\n  }, stopTextJSX, googleMap)), React.createElement(IonLoading, {\n    isOpen: showLoading,\n    message: \"\\u0E01\\u0E33\\u0E25\\u0E31\\u0E07\\u0E02\\u0E2D\\u0E1E\\u0E34\\u0E01\\u0E31\\u0E14\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208\n    },\n    __self: this\n  })));\n};\n\nexport default Tab4;","map":{"version":3,"sources":["/Users/pratyas/Desktop/Mobile App Training/MymobileApp/TOTRun/src/pages/Tab4.tsx"],"names":["React","useState","locate","Plugins","GoogleMapReact","IonPage","IonHeader","IonToolbar","IonTitle","IonButton","IonIcon","IonButtons","IonContent","IonLoading","useIonViewDidEnter","Geolocation","Tab4","props","showLoading","setShowLoading","positionReady","setPositionReady","currentPosition","setCurrentPosition","lat","lng","acc","time","startPosition","setstartPosition","distance","setdistance","onMapLoad","map","mapsAPI","directionsService","DirectionsService","directionsRenderer","DirectionsRenderer","setMap","start","end","request","origin","destination","travelMode","route","result","status","setDirections","routes","i","legs","length","console","log","text","trafficLayer","TrafficLayer","startGetGPS","getDirection","position2","getCurrentPosition","position1","coords","latitude","longitude","accuracy","timestamp","datetime","Date","startDistance","getDistance","googleMap","key","maps","watch1","startWatchGPS","watchPosition","position","error","startTextJSX","stopTextJSX","history","push","height","width"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport { locate, laptop, time } from \"ionicons/icons\";\r\nimport { Plugins } from \"@capacitor/core\";\r\nimport GoogleMapReact from 'google-map-react';\r\nimport { RefresherEventDetail } from '@ionic/core';\r\nimport { start } from 'repl';\r\nimport { IonPage, IonHeader, IonToolbar, IonTitle, IonButton, IonIcon, IonButtons, IonContent, IonLoading, useIonViewDidEnter } from '@ionic/react';\r\nimport { RouteComponentProps, useHistory } from 'react-router';\r\n\r\nconst { Geolocation } = Plugins;\r\nconst Tab4: React.FC<RouteComponentProps> = (props) => {\r\n  const [showLoading, setShowLoading] = useState(false);\r\n  const [positionReady, setPositionReady] = useState(false);\r\n  const [currentPosition, setCurrentPosition] = useState({ lat: 0, lng: 0, acc: 0, time: 0});\r\n  const [startPosition, setstartPosition] = useState({ lat: 0, lng: 0, acc: 0, time: 0 });\r\n  const [distance, setdistance] = useState({ distance: 0 });\r\n\r\n  let onMapLoad = (map: any, mapsAPI: any) => {\r\n    let directionsService = new mapsAPI.DirectionsService();\r\n    let directionsRenderer = new mapsAPI.DirectionsRenderer();\r\n    directionsRenderer.setMap(map)\r\n    // let start = { lat: 9.1106153, lng: 99.3018452 };\r\n    let start = { lat : startPosition.lat,lng : startPosition.lng}\r\n    let end = { lat: 6.9506242, lng: 100.41277989999999 };\r\n    // let end = { lat : currentPosition.lat,lng : currentPosition.lng}\r\n    let request = {\r\n      origin: start,\r\n      destination: end,\r\n       travelMode: 'WALKING'\r\n    };\r\n    directionsService.route(request, function (result: any, status: any) {\r\n      if (status == 'OK') {\r\n        directionsRenderer.setDirections(result);\r\n        let route = result.routes[0];\r\n        for (let i = 0; i < route.legs.length; i++) {\r\n          console.log('directionService',route.legs[i].distance.text)\r\n          \r\n        }\r\n        \r\n        console.log('Distance :',route.legs.length)\r\n      }\r\n    });\r\n    let trafficLayer = new mapsAPI.TrafficLayer();\r\n  }\r\n  \r\n  useIonViewDidEnter(()=>{\r\n     startGetGPS();\r\n    // startDistance();\r\n  });\r\n\r\n  const getDirection = async () => {\r\n    console.log('Getting geolocation....');\r\n    setShowLoading(true);\r\n    let position2 = await Geolocation.getCurrentPosition();\r\n    setShowLoading(false);\r\n    setPositionReady(true);\r\n  }\r\n  const startGetGPS = async () => {\r\n    console.log('Getting geolocation....startGetGPS');\r\n    setShowLoading(true);\r\n    let position1 = await Geolocation.getCurrentPosition();\r\n    setShowLoading(false);\r\n    setPositionReady(true);\r\n    setstartPosition({\r\n      lat: position1.coords.latitude,\r\n      lng: position1.coords.longitude,\r\n      acc: position1.coords.accuracy,\r\n      time: position1.timestamp\r\n    })\r\n    setCurrentPosition({\r\n      lat: position1.coords.latitude,\r\n      lng: position1.coords.longitude,\r\n      acc: position1.coords.accuracy,\r\n      time: position1.timestamp\r\n    });\r\n    let lat = position1.coords.latitude;\r\n    let lng = position1.coords.longitude;\r\n    let datetime = new Date(position1.timestamp);\r\n\r\n    console.log('Current startGetGPS', lat, lng,datetime);\r\n\r\n  }\r\n  const startDistance = async () => {\r\n    console.log('Getting geolocation....startDistance');\r\n    setShowLoading(true);\r\n    let position1 = await Geolocation.getCurrentPosition();\r\n    setShowLoading(false);\r\n    setPositionReady(true);\r\n    \r\n    setCurrentPosition({\r\n      lat: position1.coords.latitude,\r\n      lng: position1.coords.longitude,\r\n      acc: position1.coords.accuracy,\r\n      time: position1.timestamp\r\n    });\r\n    \r\n    let lat = position1.coords.latitude;\r\n    let lng = position1.coords.longitude;\r\n    \r\n    console.log('Start timestamp',new Date(startPosition.time));\r\n    \r\n    // console.log('Current startDistance', position1);\r\n  }\r\n  const getDistance = async () => {\r\n    console.log('Getting geolocation....getDistance');\r\n    setShowLoading(true);\r\n    let position1 = await Geolocation.getCurrentPosition();\r\n    setShowLoading(false);\r\n    setPositionReady(true);\r\n    setCurrentPosition({\r\n      lat: position1.coords.latitude,\r\n      lng: position1.coords.longitude,\r\n      acc: position1.coords.accuracy,\r\n      time: position1.timestamp\r\n    });\r\n     console.log('Stop timestamp',new Date(currentPosition.time));\r\n    let googleMap;\r\n    if (positionReady) {\r\n      googleMap = (\r\n        <GoogleMapReact\r\n          bootstrapURLKeys={{ key: 'AIzaSyATDm0MlJIxUXoIU56PIOk3aY26XXs6ul0' }}\r\n          defaultCenter={currentPosition}\r\n          defaultZoom={15}\r\n          yesIWantToUseGoogleMapApiInternals\r\n          onGoogleApiLoaded={({ map, maps }) => { onMapLoad(map, maps) }} >\r\n        </GoogleMapReact>\r\n      )\r\n    }\r\n  }\r\n  let watch1;\r\n  let startWatchGPS = () => {\r\n    console.log('Watching geolocation...');\r\n    setShowLoading(true);\r\n    watch1 = Geolocation.watchPosition({}, (position, error) => {\r\n      console.log('new position', position);\r\n      setShowLoading(false);\r\n      setPositionReady(true);\r\n      setCurrentPosition({\r\n        lat: position.coords.latitude,\r\n        lng: position.coords.longitude,\r\n        acc: position.coords.accuracy,\r\n        time: position.timestamp\r\n      })\r\n    }\r\n    );\r\n  }\r\nlet startTextJSX;\r\n\r\n  if (positionReady == true) {\r\n    startTextJSX = <p>{currentPosition.lat},{currentPosition.lng},{currentPosition.time}</p>\r\n  }\r\n  else {\r\n    startTextJSX = <p>กดปุ่มบนขวาเพื่อระบุพิกัดของเครื่อง</p>\r\n  }\r\n let stopTextJSX ;\r\n \r\n \r\n  if (positionReady == true) {\r\n    \r\n    \r\n    stopTextJSX = <p>stopTextJSX longtitude = {currentPosition.lat}<br></br>latitude = {currentPosition.lng}<br></br>timestamp = {currentPosition.time}</p>\r\n  } else {\r\n    stopTextJSX = <p>กดปุ่มบนขวาเพื่อระบุพิกัดของเครื่อง</p>\r\n  }\r\n    let googleMap;\r\n  if (positionReady) {\r\n    googleMap = (\r\n      <GoogleMapReact\r\n        bootstrapURLKeys={{ key: 'AIzaSyATDm0MlJIxUXoIU56PIOk3aY26XXs6ul0' }}\r\n        defaultCenter={currentPosition}\r\n        defaultZoom={15}\r\n        yesIWantToUseGoogleMapApiInternals\r\n        onGoogleApiLoaded={({ map, maps }) => { onMapLoad(map, maps) }} >\r\n      </GoogleMapReact>\r\n    )\r\n  }\r\n  return (\r\n     <IonPage>\r\n      <IonHeader translucent={true}>\r\n         <IonToolbar>\r\n          <IonTitle>Easy Running#1</IonTitle>\r\n          <IonButtons slot = \"end\">\r\n          <IonButton onClick={getDirection}>\r\n               <IonIcon icon={locate} slot=\"icon-only\"></IonIcon>\r\n             </IonButton>\r\n            <IonButton expand=\"full\" color=\"primary\" shape=\"round\" slot=\"start\" size=\"large\" onClick={startDistance}>Start</IonButton>\r\n            <IonButton expand=\"block\" color=\"secondary\" shape=\"round\" slot=\"start\" size=\"large\" onClick={\r\n              () => {\r\n                getDistance()\r\n                props.history.push('/Tab2')\r\n                }\r\n              }>\r\n                Stop</IonButton>\r\n           </IonButtons>\r\n        </IonToolbar>\r\n       </IonHeader>\r\n       <IonContent>\r\n         <body >\r\n           <div style={{ height: '90vh', width: '100%' }}>\r\n             {/* {startTextJSX} */}\r\n             {stopTextJSX}\r\n             {googleMap}\r\n             {/* {positionTextJSX} */}\r\n             {/* {googleMap}  */}\r\n             {/* {DistanceTextJSX} */}\r\n           </div>\r\n         </body>\r\n         <IonLoading isOpen={showLoading} message=\"กำลังขอพิกัด\" />\r\n       </IonContent>\r\n     </IonPage>\r\n  );\r\n  };\r\nexport default Tab4;"]},"metadata":{},"sourceType":"module"}