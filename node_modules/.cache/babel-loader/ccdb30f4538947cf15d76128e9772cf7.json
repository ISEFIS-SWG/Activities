{"ast":null,"code":"import _regeneratorRuntime from\"/Users/pratyas/Documents/MobileAppProject/MymobileApp/TOTRun/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/pratyas/Documents/MobileAppProject/MymobileApp/TOTRun/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/pratyas/Documents/MobileAppProject/MymobileApp/TOTRun/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{locate}from\"ionicons/icons\";import{Plugins}from\"@capacitor/core\";import GoogleMapReact from'google-map-react';import{IonPage,IonHeader,IonToolbar,IonTitle,IonButton,IonIcon,IonButtons,IonContent,IonLoading,useIonViewDidEnter}from'@ionic/react';var Geolocation=Plugins.Geolocation;var Tab4=function Tab4(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showLoading=_useState2[0],setShowLoading=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),positionReady=_useState4[0],setPositionReady=_useState4[1];var _useState5=useState({lat:0,lng:0,acc:0,time:0}),_useState6=_slicedToArray(_useState5,2),currentPosition=_useState6[0],setCurrentPosition=_useState6[1];var _useState7=useState({lat:0,lng:0,acc:0,time:0}),_useState8=_slicedToArray(_useState7,2),startPosition=_useState8[0],setStartPosition=_useState8[1];var _useState9=useState(true),_useState10=_slicedToArray(_useState9,2),startReady=_useState10[0],setStartReady=_useState10[1];var _useState11=useState({time:0}),_useState12=_slicedToArray(_useState11,2),startStatus=_useState12[0],setStartStatus=_useState12[1];var _useState13=useState(0),_useState14=_slicedToArray(_useState13,2),totalDistance=_useState14[0],setTotalDistance=_useState14[1];var onMapLoad=function onMapLoad(map,mapsAPI){var directionsService=new mapsAPI.DirectionsService();var directionsRenderer=new mapsAPI.DirectionsRenderer();directionsRenderer.setMap(map);var start={lat:9.1106153,lng:99.3018452};var end={lat:6.9506242,lng:100.41277989999999};var waypts=[7.669402,100.022582];var request={origin:end,destination:end,waypoints:[{location:\"7.0451252, 100.1912893\",stopover:true},{location:\"7.003344, 100.326394\",stopover:true}],optimizeWaypoints:true,travelMode:'WALKING'};directionsService.route(request,function(result,status){if(status=='OK'){directionsRenderer.setDirections(result);var route=result.routes[0];var totalDist=0;for(var i=0;i<route.legs.length;i++){console.log('directionService',route.legs[i].distance.text);totalDist+=route.legs[i].distance.value;}var dis1=route.legs[route.legs.length-1].distance.value/1000;// distance : km.\nconsole.log(dis1+' km.');var weight=78;// kg.\nvar cal=weight*dis1*1.036;console.log(cal.toFixed(2)+\" Kcal\");}});var trafficLayer=new mapsAPI.TrafficLayer();};useIonViewDidEnter(function(){});var startGetGPS=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var position1,lat,lng;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log('Getting...startGetGPS');setShowLoading(true);_context.next=4;return Geolocation.getCurrentPosition();case 4:position1=_context.sent;setShowLoading(false);setPositionReady(true);setCurrentPosition({lat:position1.coords.latitude,lng:position1.coords.longitude,acc:position1.coords.accuracy,time:position1.timestamp});if(startReady==true){setStartStatus({time:position1.timestamp});setStartPosition({lat:position1.coords.latitude,lng:position1.coords.longitude,acc:position1.coords.accuracy,time:position1.timestamp});setStartReady(false);}lat=position1.coords.latitude;lng=position1.coords.longitude;console.log('Current startGetGPS',lat,lng);startWatchGPS();case 13:case\"end\":return _context.stop();}}},_callee);}));return function startGetGPS(){return _ref.apply(this,arguments);};}();var getDistance=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var position1,lat,lng,googleMap;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log('Getting geolocation....getDistance');setShowLoading(true);_context2.next=4;return Geolocation.getCurrentPosition();case 4:position1=_context2.sent;setShowLoading(false);setPositionReady(true);setCurrentPosition({lat:position1.coords.latitude,lng:position1.coords.longitude,acc:position1.coords.accuracy,time:position1.timestamp});lat=position1.coords.latitude;lng=position1.coords.longitude;if(positionReady){googleMap=React.createElement(GoogleMapReact,{bootstrapURLKeys:{key:'AIzaSyATDm0MlJIxUXoIU56PIOk3aY26XXs6ul0'},defaultCenter:currentPosition,defaultZoom:15,yesIWantToUseGoogleMapApiInternals:true,onGoogleApiLoaded:function onGoogleApiLoaded(_ref3){var map=_ref3.map,maps=_ref3.maps;onMapLoad(map,maps);}});}case 11:case\"end\":return _context2.stop();}}},_callee2);}));return function getDistance(){return _ref2.apply(this,arguments);};}();var watch1;var distance2;var startWatchGPS=function startWatchGPS(){console.log('Watching geolocation...startWatchGPS');setShowLoading(true);watch1=Geolocation.watchPosition({},function(position,error){console.log('new position startWatchGPS',position);setShowLoading(false);setPositionReady(true);setStartPosition({lat:currentPosition.lat,lng:currentPosition.lng,acc:currentPosition.acc,time:currentPosition.time});setCurrentPosition({lat:position.coords.latitude,lng:position.coords.longitude,acc:position.coords.accuracy,time:position.timestamp});var distance=findDistance(startPosition.lat,startPosition.lng,currentPosition.lat,currentPosition.lng);setTotalDistance(totalDistance+distance);});distance2=totalDistance;console.log('totalDistance ',totalDistance);console.log('Distance 2 ',distance2);};var findDistance=function findDistance(lat1,lon1,lat2,lon2){var R=6373;// km\nvar dLat=toRad(lat2-lat1);var dLon=toRad(lon2-lon1);var a=Math.sin(dLat/2)*Math.sin(dLat/2)+toRad(Math.cos(lat1))*toRad(Math.cos(lat2))*Math.sin(dLon/2)*Math.sin(dLon/2);var c=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));var d=R*c;function toRad(Value){/** Converts numeric degrees to radians */return Value*Math.PI/180;}/* ทศนิยม 2 ตำแหน่ง */var d_round_to_2nd=Number(d.toFixed(2));console.log(\"ระยะทางได้ผลลัพธ์ = \"+d_round_to_2nd);return d_round_to_2nd;};/* เพิ่มเลขศูนย์หน้า วัน เดือน เวลา ที่เป็นเลขหลักเดียว */var addZero=function addZero(i){if(i<'10'){i=\"0\"+i;}return i;};var getDatetime=function getDatetime(time){var myDate=new Date(time);var d=addZero(myDate.getDate());var m=addZero(myDate.getMonth());var y=myDate.getFullYear();var h=addZero(myDate.getHours());var min=addZero(myDate.getMinutes());var sec=addZero(myDate.getSeconds());var times=d+'-'+m+'-'+y+' '+h+':'+min+':'+sec;console.log('DateTime',times);return times;};var durationtime=function durationtime(timestart,timestop){var time=timestop-timestart;var mystartDate=new Date(timestart);var mystopDate=new Date(timestop);var myDate=new Date(time);// //let d = myDate.getDate();\n// let m = myDate.getMonth();\n// let y = myDate.getFullYear();\nvar h=addZero(myDate.getHours());var min=addZero(myDate.getMinutes());var sec=addZero(myDate.getSeconds());var times=h+':'+min+':'+sec;console.log('Time Start :',mystartDate);console.log('Time Stop :',mystopDate);console.log('Diff Time :',h,':',min,':',sec);console.log(times);return times;};var calduration=function calduration(){var x=durationtime(1453467965439,1585492636444);console.log(x+\" น.\");};var calories=function calories(distance,weight){var cal=(weight*distance*1.036).toFixed(2);console.log(cal+\" Kcal\");return cal;};var calCalories=function calCalories(){var x=calories(308,78);console.log(x+\" Kcal.\");};var startTextJSX;if(positionReady==true){startTextJSX=React.createElement(\"p\",null,currentPosition.lat,\",\",currentPosition.lng,\",\",currentPosition.time);}else{startTextJSX=React.createElement(\"p\",null,\"\\u0E01\\u0E14\\u0E1B\\u0E38\\u0E48\\u0E21\\u0E1A\\u0E19\\u0E02\\u0E27\\u0E32\\u0E40\\u0E1E\\u0E37\\u0E48\\u0E2D\\u0E23\\u0E30\\u0E1A\\u0E38\\u0E1E\\u0E34\\u0E01\\u0E31\\u0E14\\u0E02\\u0E2D\\u0E07\\u0E40\\u0E04\\u0E23\\u0E37\\u0E48\\u0E2D\\u0E07\");}var stopTextJSX;var distanceTextJSX;var starttime=getDatetime(startStatus.time);var stoptime=getDatetime(currentPosition.time);if(positionReady==true){stopTextJSX=React.createElement(\"p\",null,\"LastPosition = \",startPosition.lat,React.createElement(\"br\",null),\"latitude = \",startPosition.lng,React.createElement(\"br\",null),\"Time = \",starttime,React.createElement(\"br\",null),\"CurrentPosition = \",currentPosition.lat,React.createElement(\"br\",null),\"latitude = \",currentPosition.lng,React.createElement(\"br\",null),\"timestamp = \",stoptime,React.createElement(\"br\",null));distanceTextJSX=React.createElement(\"p\",null,\"Distance = \",distance2,\" totalDistance = \",totalDistance);}else{stopTextJSX=React.createElement(\"p\",null,\"\\u0E01\\u0E14\\u0E1B\\u0E38\\u0E48\\u0E21\\u0E1A\\u0E19\\u0E02\\u0E27\\u0E32\\u0E40\\u0E1E\\u0E37\\u0E48\\u0E2D\\u0E23\\u0E30\\u0E1A\\u0E38\\u0E1E\\u0E34\\u0E01\\u0E31\\u0E14\\u0E02\\u0E2D\\u0E07\\u0E40\\u0E04\\u0E23\\u0E37\\u0E48\\u0E2D\\u0E07\");}var googleMap;if(positionReady){googleMap=React.createElement(GoogleMapReact,{bootstrapURLKeys:{key:'AIzaSyATDm0MlJIxUXoIU56PIOk3aY26XXs6ul0'},defaultCenter:currentPosition,defaultZoom:15,yesIWantToUseGoogleMapApiInternals:true,onGoogleApiLoaded:function onGoogleApiLoaded(_ref4){var map=_ref4.map,maps=_ref4.maps;onMapLoad(map,maps);}});}return React.createElement(IonPage,null,React.createElement(IonHeader,{translucent:true},React.createElement(IonToolbar,null,React.createElement(IonTitle,null,\"Easy Running#1\"),React.createElement(IonButtons,{slot:\"end\"},React.createElement(IonButton,{onClick:startWatchGPS},React.createElement(IonIcon,{icon:locate,slot:\"icon-only\"})),React.createElement(IonButton,{expand:\"full\",color:\"primary\",shape:\"round\",slot:\"start\",size:\"large\",onClick:startGetGPS},\"Start\"),React.createElement(IonButton,{expand:\"block\",color:\"secondary\",shape:\"round\",slot:\"start\",size:\"large\"},\"Stop\")))),React.createElement(IonContent,null,React.createElement(\"body\",null,React.createElement(\"div\",{style:{height:'90vh',width:'100%'}},stopTextJSX,distanceTextJSX)),React.createElement(IonLoading,{isOpen:showLoading,message:\"\\u0E01\\u0E33\\u0E25\\u0E31\\u0E07\\u0E02\\u0E2D\\u0E1E\\u0E34\\u0E01\\u0E31\\u0E14\"})));};export default Tab4;","map":{"version":3,"sources":["/Users/pratyas/Documents/MobileAppProject/MymobileApp/TOTRun/src/pages/Tab4.tsx"],"names":["React","useState","locate","Plugins","GoogleMapReact","IonPage","IonHeader","IonToolbar","IonTitle","IonButton","IonIcon","IonButtons","IonContent","IonLoading","useIonViewDidEnter","Geolocation","Tab4","props","showLoading","setShowLoading","positionReady","setPositionReady","lat","lng","acc","time","currentPosition","setCurrentPosition","startPosition","setStartPosition","startReady","setStartReady","startStatus","setStartStatus","totalDistance","setTotalDistance","onMapLoad","map","mapsAPI","directionsService","DirectionsService","directionsRenderer","DirectionsRenderer","setMap","start","end","waypts","request","origin","destination","waypoints","location","stopover","optimizeWaypoints","travelMode","route","result","status","setDirections","routes","totalDist","i","legs","length","console","log","distance","text","value","dis1","weight","cal","toFixed","trafficLayer","TrafficLayer","startGetGPS","getCurrentPosition","position1","coords","latitude","longitude","accuracy","timestamp","startWatchGPS","getDistance","googleMap","key","maps","watch1","distance2","watchPosition","position","error","findDistance","lat1","lon1","lat2","lon2","R","dLat","toRad","dLon","a","Math","sin","cos","c","atan2","sqrt","d","Value","PI","d_round_to_2nd","Number","addZero","getDatetime","myDate","Date","getDate","m","getMonth","y","getFullYear","h","getHours","min","getMinutes","sec","getSeconds","times","durationtime","timestart","timestop","mystartDate","mystopDate","calduration","x","calories","calCalories","startTextJSX","stopTextJSX","distanceTextJSX","starttime","stoptime","height","width"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { locate, laptop, time } from \"ionicons/icons\";\r\nimport { Plugins } from \"@capacitor/core\";\r\nimport GoogleMapReact from 'google-map-react';\r\nimport { RefresherEventDetail } from '@ionic/core';\r\nimport { start } from 'repl';\r\nimport { IonPage, IonHeader, IonToolbar, IonTitle, IonButton, IonIcon, IonButtons, IonContent, IonLoading, useIonViewDidEnter } from '@ionic/react';\r\nimport { RouteComponentProps, useHistory } from 'react-router';\r\nimport { strict } from 'assert';\r\n\r\nconst { Geolocation } = Plugins;\r\nconst Tab4: React.FC<RouteComponentProps> = (props) => {\r\n  const [showLoading, setShowLoading] = useState(false);\r\n  const [positionReady, setPositionReady] = useState(false);\r\n  const [currentPosition, setCurrentPosition] = useState({ lat: 0, lng: 0, acc: 0, time: 0 });\r\n  const [startPosition, setStartPosition] = useState({ lat: 0, lng: 0, acc: 0, time: 0 });\r\n  const [startReady, setStartReady] = useState(true);\r\n  const [startStatus, setStartStatus] = useState({time: 0});\r\n  const [totalDistance,setTotalDistance] = useState(0);\r\n\r\n\r\n\r\n  let onMapLoad = (map: any, mapsAPI: any) => {\r\n    let directionsService = new mapsAPI.DirectionsService();\r\n    let directionsRenderer = new mapsAPI.DirectionsRenderer();\r\n    directionsRenderer.setMap(map)\r\n    let start = { lat: 9.1106153, lng: 99.3018452 };\r\n\r\n    let end = { lat: 6.9506242, lng: 100.41277989999999 };\r\n\r\n    var waypts = [7.669402, 100.022582]\r\n\r\n    let request = {\r\n      origin: end,\r\n      destination: end,\r\n      waypoints: [\r\n        {\r\n          location: \"7.0451252, 100.1912893\",\r\n          stopover: true\r\n        },\r\n        {\r\n          location: \"7.003344, 100.326394\",\r\n          stopover: true\r\n        }\r\n      ],\r\n      optimizeWaypoints: true,\r\n      travelMode: 'WALKING'\r\n\r\n    };\r\n\r\n    directionsService.route(request, function (result: any, status: any) {\r\n\r\n      if (status == 'OK') {\r\n        directionsRenderer.setDirections(result);\r\n        let route = result.routes[0];\r\n\r\n        var totalDist = 0;\r\n\r\n        for (let i = 0; i < route.legs.length; i++) {\r\n          console.log('directionService', route.legs[i].distance.text)\r\n          totalDist += route.legs[i].distance.value;\r\n        }\r\n\r\n\r\n        let dis1 = route.legs[route.legs.length - 1].distance.value / 1000; // distance : km.\r\n        console.log(dis1 + ' km.')\r\n        let weight = 78 // kg.\r\n        let cal = weight * dis1 * 1.036\r\n        console.log(cal.toFixed(2) + \" Kcal\")\r\n      }\r\n    });\r\n    let trafficLayer = new mapsAPI.TrafficLayer();\r\n  }\r\n\r\n  useIonViewDidEnter(() => {\r\n    \r\n    \r\n  });\r\n\r\n\r\n\r\n  const startGetGPS = async () => {\r\n    console.log('Getting...startGetGPS');\r\n    setShowLoading(true);\r\n    let position1 = await Geolocation.getCurrentPosition();\r\n    setShowLoading(false);\r\n    setPositionReady(true);\r\n\r\n    setCurrentPosition({\r\n      lat: position1.coords.latitude,\r\n      lng: position1.coords.longitude,\r\n      acc: position1.coords.accuracy,\r\n      time: position1.timestamp\r\n    });\r\n\r\n    if (startReady == true) {\r\n      setStartStatus({\r\n        time: position1.timestamp\r\n      }\r\n      )\r\n      setStartPosition({\r\n        lat: position1.coords.latitude,\r\n        lng: position1.coords.longitude,\r\n        acc: position1.coords.accuracy,\r\n        time: position1.timestamp\r\n      })\r\n      setStartReady(false);\r\n    }\r\n\r\n\r\n\r\n    let lat = position1.coords.latitude;\r\n    let lng = position1.coords.longitude;\r\n    console.log('Current startGetGPS', lat, lng);\r\n    startWatchGPS();\r\n\r\n  }\r\n  const getDistance = async () => {\r\n    console.log('Getting geolocation....getDistance');\r\n    setShowLoading(true);\r\n    let position1 = await Geolocation.getCurrentPosition();\r\n    setShowLoading(false);\r\n    setPositionReady(true);\r\n    setCurrentPosition({\r\n      lat: position1.coords.latitude,\r\n      lng: position1.coords.longitude,\r\n      acc: position1.coords.accuracy,\r\n      time: position1.timestamp\r\n    });\r\n    let lat = position1.coords.latitude;\r\n    let lng = position1.coords.longitude;\r\n\r\n    let googleMap;\r\n    if (positionReady) {\r\n      googleMap = (\r\n        <GoogleMapReact\r\n          bootstrapURLKeys={{ key: 'AIzaSyATDm0MlJIxUXoIU56PIOk3aY26XXs6ul0' }}\r\n          defaultCenter={currentPosition}\r\n          defaultZoom={15}\r\n          yesIWantToUseGoogleMapApiInternals\r\n          onGoogleApiLoaded={({ map, maps }) => { onMapLoad(map, maps) }} >\r\n        </GoogleMapReact>\r\n      )\r\n    }\r\n  }\r\n  let watch1;\r\n  let distance2;\r\n  let startWatchGPS = () => {\r\n    console.log('Watching geolocation...startWatchGPS');\r\n    setShowLoading(true);\r\n    watch1 = Geolocation.watchPosition({}, (position, error) => {\r\n      console.log('new position startWatchGPS', position);\r\n      setShowLoading(false);\r\n      setPositionReady(true);\r\n      setStartPosition({\r\n        lat: currentPosition.lat,\r\n        lng: currentPosition.lng,\r\n        acc: currentPosition.acc,\r\n        time: currentPosition.time\r\n      })\r\n      setCurrentPosition({\r\n        lat: position.coords.latitude,\r\n        lng: position.coords.longitude,\r\n        acc: position.coords.accuracy,\r\n        time: position.timestamp\r\n      })\r\n      \r\n      let distance = findDistance(startPosition.lat, startPosition.lng, currentPosition.lat, currentPosition.lng);\r\n      setTotalDistance(totalDistance + distance);\r\n      \r\n\r\n    }\r\n    );\r\n    distance2 = totalDistance;\r\n    console.log('totalDistance ',totalDistance);\r\n    console.log('Distance 2 ',distance2);\r\n  }\r\n\r\n\r\n\r\n  let findDistance = (lat1: any, lon1: any, lat2: any, lon2: any) => {\r\n    let R = 6373; // km\r\n    let dLat = toRad((lat2 - lat1));\r\n    let dLon = toRad((lon2 - lon1));\r\n    let a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +\r\n      toRad(Math.cos(lat1)) * toRad(Math.cos(lat2)) *\r\n      Math.sin(dLon / 2) * Math.sin(dLon / 2);\r\n    let c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n    let d = R * c;\r\n    function toRad(Value: any) {\r\n      /** Converts numeric degrees to radians */\r\n      return Value * Math.PI / 180;\r\n    }\r\n    /* ทศนิยม 2 ตำแหน่ง */\r\n  \r\n    let d_round_to_2nd = Number(d.toFixed(2));\r\n    console.log(\"ระยะทางได้ผลลัพธ์ = \" + d_round_to_2nd);\r\n    return d_round_to_2nd;\r\n  };\r\n\r\n  /* เพิ่มเลขศูนย์หน้า วัน เดือน เวลา ที่เป็นเลขหลักเดียว */\r\n  let addZero = (i: any) => {\r\n    if (i < '10') {\r\n      i = \"0\" + i;\r\n    }\r\n    return i;\r\n  }\r\n\r\n  let getDatetime = (time: any) => {\r\n\r\n    let myDate = new Date(time);\r\n    let d = addZero(myDate.getDate());\r\n    let m = addZero(myDate.getMonth());\r\n    let y = myDate.getFullYear();\r\n    let h = addZero(myDate.getHours());\r\n    let min = addZero(myDate.getMinutes());\r\n    let sec = addZero(myDate.getSeconds());\r\n    let times = d + '-' + m + '-' + y + ' ' + h + ':' + min + ':' + sec\r\n    console.log('DateTime', times);\r\n    return times;\r\n  };\r\n\r\n  let durationtime = (timestart: any, timestop: any) => {\r\n    let time = timestop - timestart;\r\n    let mystartDate = new Date(timestart);\r\n    let mystopDate = new Date(timestop);\r\n    let myDate = new Date(time);\r\n    // //let d = myDate.getDate();\r\n    // let m = myDate.getMonth();\r\n    // let y = myDate.getFullYear();\r\n    let h = addZero(myDate.getHours());\r\n    let min = addZero(myDate.getMinutes());\r\n    let sec = addZero(myDate.getSeconds());\r\n    let times = h + ':' + min + ':' + sec\r\n    console.log('Time Start :', mystartDate);\r\n    console.log('Time Stop :', mystopDate);\r\n    console.log('Diff Time :', h, ':', min, ':', sec);\r\n    console.log(times)\r\n    return times;\r\n  };\r\n\r\n  let calduration = () => {\r\n    let x = durationtime(1453467965439, 1585492636444);\r\n    console.log(x + \" น.\")\r\n  }\r\n\r\n  let calories = (distance: any, weight: any) => {\r\n\r\n    let cal = (weight * distance * 1.036).toFixed(2)\r\n    console.log(cal + \" Kcal\")\r\n    return cal;\r\n\r\n  };\r\n  let calCalories = () => {\r\n    let x = calories(308, 78);\r\n    console.log(x + \" Kcal.\")\r\n  }\r\n\r\n  let startTextJSX;\r\n\r\n  if (positionReady == true) {\r\n    startTextJSX = <p>{currentPosition.lat},{currentPosition.lng},{currentPosition.time}</p>\r\n  }\r\n  else {\r\n    startTextJSX = <p>กดปุ่มบนขวาเพื่อระบุพิกัดของเครื่อง</p>\r\n  }\r\n  let stopTextJSX;\r\n  let distanceTextJSX;\r\n  \r\n  let starttime = getDatetime(startStatus.time);\r\n  let stoptime = getDatetime(currentPosition.time);\r\n\r\n  if (positionReady == true) {\r\n\r\n\r\n    stopTextJSX = <p>LastPosition = {startPosition.lat}<br></br>\r\n                    latitude = {startPosition.lng}<br></br>\r\n                    Time = {starttime}<br></br>\r\n                    CurrentPosition = {currentPosition.lat}<br></br>\r\n                    latitude = {currentPosition.lng}<br></br>\r\n                    timestamp = {stoptime}<br></br></p>\r\n\r\n  distanceTextJSX = <p>Distance = {distance2} totalDistance = {totalDistance}</p>\r\n  } else {\r\n    stopTextJSX = <p>กดปุ่มบนขวาเพื่อระบุพิกัดของเครื่อง</p>\r\n  }\r\n  let googleMap;\r\n  if (positionReady) {\r\n    googleMap = (\r\n      <GoogleMapReact\r\n        bootstrapURLKeys={{ key: 'AIzaSyATDm0MlJIxUXoIU56PIOk3aY26XXs6ul0' }}\r\n        defaultCenter={currentPosition}\r\n        defaultZoom={15}\r\n        yesIWantToUseGoogleMapApiInternals\r\n        onGoogleApiLoaded={({ map, maps }) => { onMapLoad(map, maps) }} >\r\n      </GoogleMapReact>\r\n    )\r\n  }\r\n  return (\r\n    <IonPage>\r\n      <IonHeader translucent={true}>\r\n        <IonToolbar>\r\n          <IonTitle>Easy Running#1</IonTitle>\r\n          <IonButtons slot=\"end\">\r\n            <IonButton onClick={startWatchGPS}>\r\n              <IonIcon icon={locate} slot=\"icon-only\"></IonIcon>\r\n            </IonButton>\r\n            <IonButton expand=\"full\" color=\"primary\" shape=\"round\" slot=\"start\" size=\"large\" onClick={startGetGPS} >Start</IonButton>\r\n            <IonButton expand=\"block\" color=\"secondary\" shape=\"round\" slot=\"start\" size=\"large\" >Stop</IonButton>\r\n          </IonButtons>\r\n        </IonToolbar>\r\n      </IonHeader>\r\n      <IonContent>\r\n        <body >\r\n          <div style={{ height: '90vh', width: '100%' }}>\r\n            {/* {startTextJSX} */}\r\n            {stopTextJSX}\r\n            {distanceTextJSX}\r\n            {/* {positionTextJSX} */}\r\n            {/* {googleMap}  */}\r\n            {/* {DistanceTextJSX} */}\r\n          </div>\r\n        </body>\r\n        <IonLoading isOpen={showLoading} message=\"กำลังขอพิกัด\" />\r\n      </IonContent>\r\n    </IonPage>\r\n  );\r\n};\r\nexport default Tab4;"]},"metadata":{},"sourceType":"module"}