{"ast":null,"code":"var _jsxFileName = \"/Users/pratyas/Documents/MobileAppProject/MymobileApp/TOTRun/src/pages/Tab4.tsx\";\nimport React, { useState } from 'react';\nimport { locate } from \"ionicons/icons\";\nimport { Plugins } from \"@capacitor/core\";\nimport GoogleMapReact from 'google-map-react';\nimport { IonPage, IonHeader, IonToolbar, IonTitle, IonButton, IonIcon, IonButtons, IonContent, IonLoading, useIonViewDidEnter } from '@ionic/react';\nconst {\n  Geolocation\n} = Plugins;\n\nconst Tab4 = props => {\n  const [showLoading, setShowLoading] = useState(false);\n  const [positionReady, setPositionReady] = useState(false);\n  const [currentPosition, setCurrentPosition] = useState({\n    lat: 0,\n    lng: 0,\n    acc: 0,\n    time: 0\n  });\n  const [startPosition, setStartPosition] = useState({\n    lat: 0,\n    lng: 0,\n    acc: 0,\n    time: 0\n  });\n  const [startReady, setStartReady] = useState(true);\n\n  let onMapLoad = (map, mapsAPI) => {\n    let directionsService = new mapsAPI.DirectionsService();\n    let directionsRenderer = new mapsAPI.DirectionsRenderer();\n    directionsRenderer.setMap(map);\n    let start = {\n      lat: 9.1106153,\n      lng: 99.3018452\n    };\n    let end = {\n      lat: 6.9506242,\n      lng: 100.41277989999999\n    };\n    var waypts = [7.669402, 100.022582];\n    let request = {\n      origin: end,\n      destination: end,\n      waypoints: [{\n        location: \"7.0451252, 100.1912893\",\n        stopover: true\n      }, {\n        location: \"7.003344, 100.326394\",\n        stopover: true\n      }],\n      optimizeWaypoints: true,\n      travelMode: 'WALKING'\n    };\n    directionsService.route(request, function (result, status) {\n      if (status == 'OK') {\n        directionsRenderer.setDirections(result);\n        let route = result.routes[0];\n        var totalDist = 0;\n\n        for (let i = 0; i < route.legs.length; i++) {\n          console.log('directionService', route.legs[i].distance.text);\n          totalDist += route.legs[i].distance.value;\n        }\n\n        let dis1 = route.legs[route.legs.length - 1].distance.value / 1000; // distance : km.\n\n        console.log(dis1 + ' km.');\n        let weight = 78; // kg.\n\n        let cal = weight * dis1 * 1.036;\n        console.log(cal.toFixed(2) + \" Kcal\");\n      }\n    });\n    let trafficLayer = new mapsAPI.TrafficLayer();\n  };\n\n  useIonViewDidEnter(() => {\n    startGetGPS();\n    startWatchGPS();\n  });\n\n  const getDirection = async () => {\n    console.log('Getting geolocation....');\n    setShowLoading(true);\n    let position2 = await Geolocation.getCurrentPosition();\n    setShowLoading(false);\n    setPositionReady(true);\n  };\n\n  const startGetGPS = async () => {\n    console.log('Getting geolocation....startGetGPS');\n    setShowLoading(true);\n    let position1 = await Geolocation.getCurrentPosition();\n    setShowLoading(false);\n    setPositionReady(true);\n\n    if (startReady == true) {\n      setStartPosition({\n        lat: position1.coords.latitude,\n        lng: position1.coords.longitude,\n        acc: position1.coords.accuracy,\n        time: position1.timestamp\n      });\n      setStartReady(false);\n    }\n\n    setCurrentPosition({\n      lat: position1.coords.latitude,\n      lng: position1.coords.longitude,\n      acc: position1.coords.accuracy,\n      time: position1.timestamp\n    });\n    let lat = position1.coords.latitude;\n    let lng = position1.coords.longitude;\n    console.log('Current startGetGPS', lat, lng);\n  };\n\n  const startDistance = async () => {\n    console.log('Getting geolocation....startDistance');\n    setShowLoading(true);\n    let position1 = await Geolocation.getCurrentPosition();\n    setShowLoading(false);\n    setPositionReady(true);\n    setCurrentPosition({\n      lat: position1.coords.latitude,\n      lng: position1.coords.longitude,\n      acc: position1.coords.accuracy,\n      time: position1.timestamp\n    });\n    let lat = position1.coords.latitude;\n    let lng = position1.coords.longitude;\n  };\n\n  const getDistance = async () => {\n    console.log('Getting geolocation....getDistance');\n    setShowLoading(true);\n    let position1 = await Geolocation.getCurrentPosition();\n    setShowLoading(false);\n    setPositionReady(true);\n    setCurrentPosition({\n      lat: position1.coords.latitude,\n      lng: position1.coords.longitude,\n      acc: position1.coords.accuracy,\n      time: position1.timestamp\n    });\n    let lat = position1.coords.latitude;\n    let lng = position1.coords.longitude;\n    console.log('Stop timestamp', new Date(currentPosition.time), lat, lng);\n    let googleMap;\n\n    if (positionReady) {\n      googleMap = React.createElement(GoogleMapReact, {\n        bootstrapURLKeys: {\n          key: 'AIzaSyATDm0MlJIxUXoIU56PIOk3aY26XXs6ul0'\n        },\n        defaultCenter: currentPosition,\n        defaultZoom: 15,\n        yesIWantToUseGoogleMapApiInternals: true,\n        onGoogleApiLoaded: ({\n          map,\n          maps\n        }) => {\n          onMapLoad(map, maps);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      });\n    }\n  };\n\n  let watch1;\n\n  let startWatchGPS = () => {\n    console.log('Watching geolocation...startWatchGPS');\n    setShowLoading(true);\n    watch1 = Geolocation.watchPosition({}, (position, error) => {\n      console.log('new position', position);\n      setShowLoading(false);\n      setPositionReady(true);\n      setCurrentPosition({\n        lat: position.coords.latitude,\n        lng: position.coords.longitude,\n        acc: position.coords.accuracy,\n        time: position.timestamp\n      });\n    });\n  };\n\n  let findDistance = (lat1, lon1, lat2, lon2) => {\n    var R = 6373; // km\n\n    var dLat = toRad(lat2 - lat1);\n    var dLon = toRad(lon2 - lon1);\n    var a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + toRad(Math.cos(lat1)) * toRad(Math.cos(lat2)) * Math.sin(dLon / 2) * Math.sin(dLon / 2);\n    var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    var d = R * c;\n\n    function toRad(Value) {\n      /** Converts numeric degrees to radians */\n      return Value * Math.PI / 180;\n    }\n\n    console.log(\"ระยะทางได้ผลลัพธ์ = \" + d);\n    return d;\n  };\n\n  let addZero = i => {\n    if (i < '10') {\n      i = \"0\" + i;\n    }\n\n    return i;\n  };\n\n  let getDatetime = time => {\n    let myDate = new Date(time);\n    let d = addZero(myDate.getDate());\n    let m = addZero(myDate.getMonth());\n    let y = myDate.getFullYear();\n    let h = addZero(myDate.getHours());\n    let min = addZero(myDate.getMinutes());\n    let sec = addZero(myDate.getSeconds());\n    let times = d + '-' + m + '-' + y + ' ' + h + ':' + min + ':' + sec;\n    console.log('Start Date', times);\n    return times;\n  };\n\n  let duration = (timestart, timestop) => {\n    let time = timestop - timestart;\n    let mystartDate = new Date(timestart);\n    let mystopDate = new Date(timestop);\n    let myDate = new Date(time);\n    let d = myDate.getDate();\n    let m = myDate.getMonth();\n    let y = myDate.getFullYear();\n    let h = myDate.getHours();\n    let min = myDate.getMinutes();\n    let sec = myDate.getSeconds();\n    let times = h + ':' + min + ':' + sec;\n    console.log('Time Start', mystartDate);\n    console.log('Time Stop', mystopDate);\n    console.log('Current', h, ':', min, ':', sec);\n    console.log(times);\n    return times;\n  };\n\n  let calduration = () => {\n    let x = duration(1453467965439, 1585492636444);\n    console.log(x + \" น.\");\n  };\n\n  let calories = (distance, weight) => {\n    let cal = (weight * distance * 1.036).toFixed(2);\n    console.log(cal + \" Kcal\");\n    return cal;\n  };\n\n  let calCalories = () => {\n    let x = calories(308, 78);\n    console.log(x + \" Kcal.\");\n  };\n\n  let startTextJSX;\n\n  if (positionReady == true) {\n    startTextJSX = React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267\n      },\n      __self: this\n    }, currentPosition.lat, \",\", currentPosition.lng, \",\", currentPosition.time);\n  } else {\n    startTextJSX = React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270\n      },\n      __self: this\n    }, \"\\u0E01\\u0E14\\u0E1B\\u0E38\\u0E48\\u0E21\\u0E1A\\u0E19\\u0E02\\u0E27\\u0E32\\u0E40\\u0E1E\\u0E37\\u0E48\\u0E2D\\u0E23\\u0E30\\u0E1A\\u0E38\\u0E1E\\u0E34\\u0E01\\u0E31\\u0E14\\u0E02\\u0E2D\\u0E07\\u0E40\\u0E04\\u0E23\\u0E37\\u0E48\\u0E2D\\u0E07\");\n  }\n\n  let stopTextJSX;\n  let distanceTextJSX;\n  let distance;\n  distance = findDistance(startPosition.lat, startPosition.lng, currentPosition.lat, currentPosition.lng); // time = duration(startPosition.time,currentPosition.time);\n\n  let starttime = getDatetime(startPosition.time);\n\n  if (positionReady == true) {\n    stopTextJSX = React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285\n      },\n      __self: this\n    }, \"currentPosition = \", currentPosition.lat, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285\n      },\n      __self: this\n    }), \"latitude = \", currentPosition.lng, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285\n      },\n      __self: this\n    }), \"timestamp = \", currentPosition.time, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285\n      },\n      __self: this\n    }), \"Startposition = \", startPosition.lat, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286\n      },\n      __self: this\n    }), \"latitude = \", startPosition.lng, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286\n      },\n      __self: this\n    }), \"timestamp = \", startPosition.time);\n    distanceTextJSX = React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289\n      },\n      __self: this\n    }, \"Distance =\", distance, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289\n      },\n      __self: this\n    }), \"Time = \", starttime);\n  } else {\n    stopTextJSX = React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291\n      },\n      __self: this\n    }, \"\\u0E01\\u0E14\\u0E1B\\u0E38\\u0E48\\u0E21\\u0E1A\\u0E19\\u0E02\\u0E27\\u0E32\\u0E40\\u0E1E\\u0E37\\u0E48\\u0E2D\\u0E23\\u0E30\\u0E1A\\u0E38\\u0E1E\\u0E34\\u0E01\\u0E31\\u0E14\\u0E02\\u0E2D\\u0E07\\u0E40\\u0E04\\u0E23\\u0E37\\u0E48\\u0E2D\\u0E07\");\n  }\n\n  let googleMap;\n\n  if (positionReady) {\n    googleMap = React.createElement(GoogleMapReact, {\n      bootstrapURLKeys: {\n        key: 'AIzaSyATDm0MlJIxUXoIU56PIOk3aY26XXs6ul0'\n      },\n      defaultCenter: currentPosition,\n      defaultZoom: 15,\n      yesIWantToUseGoogleMapApiInternals: true,\n      onGoogleApiLoaded: ({\n        map,\n        maps\n      }) => {\n        onMapLoad(map, maps);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296\n      },\n      __self: this\n    });\n  }\n\n  return React.createElement(IonPage, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306\n    },\n    __self: this\n  }, React.createElement(IonHeader, {\n    translucent: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307\n    },\n    __self: this\n  }, React.createElement(IonToolbar, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308\n    },\n    __self: this\n  }, React.createElement(IonTitle, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309\n    },\n    __self: this\n  }, \"Easy Running#1\"), React.createElement(IonButtons, {\n    slot: \"end\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310\n    },\n    __self: this\n  }, React.createElement(IonButton, {\n    onClick: startWatchGPS,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311\n    },\n    __self: this\n  }, React.createElement(IonIcon, {\n    icon: locate,\n    slot: \"icon-only\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 312\n    },\n    __self: this\n  })), React.createElement(IonButton, {\n    expand: \"full\",\n    color: \"primary\",\n    shape: \"round\",\n    slot: \"start\",\n    size: \"large\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 314\n    },\n    __self: this\n  }, \"Start\"), React.createElement(IonButton, {\n    expand: \"block\",\n    color: \"secondary\",\n    shape: \"round\",\n    slot: \"start\",\n    size: \"large\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 315\n    },\n    __self: this\n  }, \"Stop\")))), React.createElement(IonContent, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319\n    },\n    __self: this\n  }, React.createElement(\"body\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 320\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    style: {\n      height: '90vh',\n      width: '100%'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 321\n    },\n    __self: this\n  }, stopTextJSX, distanceTextJSX)), React.createElement(IonLoading, {\n    isOpen: showLoading,\n    message: \"\\u0E01\\u0E33\\u0E25\\u0E31\\u0E07\\u0E02\\u0E2D\\u0E1E\\u0E34\\u0E01\\u0E31\\u0E14\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 330\n    },\n    __self: this\n  })));\n};\n\nexport default Tab4;","map":{"version":3,"sources":["/Users/pratyas/Documents/MobileAppProject/MymobileApp/TOTRun/src/pages/Tab4.tsx"],"names":["React","useState","locate","Plugins","GoogleMapReact","IonPage","IonHeader","IonToolbar","IonTitle","IonButton","IonIcon","IonButtons","IonContent","IonLoading","useIonViewDidEnter","Geolocation","Tab4","props","showLoading","setShowLoading","positionReady","setPositionReady","currentPosition","setCurrentPosition","lat","lng","acc","time","startPosition","setStartPosition","startReady","setStartReady","onMapLoad","map","mapsAPI","directionsService","DirectionsService","directionsRenderer","DirectionsRenderer","setMap","start","end","waypts","request","origin","destination","waypoints","location","stopover","optimizeWaypoints","travelMode","route","result","status","setDirections","routes","totalDist","i","legs","length","console","log","distance","text","value","dis1","weight","cal","toFixed","trafficLayer","TrafficLayer","startGetGPS","startWatchGPS","getDirection","position2","getCurrentPosition","position1","coords","latitude","longitude","accuracy","timestamp","startDistance","getDistance","Date","googleMap","key","maps","watch1","watchPosition","position","error","findDistance","lat1","lon1","lat2","lon2","R","dLat","toRad","dLon","a","Math","sin","cos","c","atan2","sqrt","d","Value","PI","addZero","getDatetime","myDate","getDate","m","getMonth","y","getFullYear","h","getHours","min","getMinutes","sec","getSeconds","times","duration","timestart","timestop","mystartDate","mystopDate","calduration","x","calories","calCalories","startTextJSX","stopTextJSX","distanceTextJSX","starttime","height","width"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { locate, laptop, time } from \"ionicons/icons\";\r\nimport { Plugins } from \"@capacitor/core\";\r\nimport GoogleMapReact from 'google-map-react';\r\nimport { RefresherEventDetail } from '@ionic/core';\r\nimport { start } from 'repl';\r\nimport { IonPage, IonHeader, IonToolbar, IonTitle, IonButton, IonIcon, IonButtons, IonContent, IonLoading, useIonViewDidEnter } from '@ionic/react';\r\nimport { RouteComponentProps, useHistory } from 'react-router';\r\nimport { strict } from 'assert';\r\n\r\nconst { Geolocation } = Plugins;\r\nconst Tab4: React.FC<RouteComponentProps> = (props) => {\r\n  const [showLoading, setShowLoading] = useState(false);\r\n  const [positionReady, setPositionReady] = useState(false);\r\n  const [currentPosition, setCurrentPosition] = useState({ lat: 0, lng: 0, acc: 0, time: 0 });\r\n  const [startPosition,setStartPosition] = useState({lat: 0,lng: 0,acc: 0,time: 0});\r\n  const [startReady,setStartReady] = useState(true);\r\n  \r\n  \r\n\r\n  let onMapLoad = (map: any, mapsAPI: any) => {\r\n    let directionsService = new mapsAPI.DirectionsService();\r\n    let directionsRenderer = new mapsAPI.DirectionsRenderer();\r\n    directionsRenderer.setMap(map)\r\n    let start = { lat: 9.1106153, lng: 99.3018452 };\r\n    \r\n    let end = { lat: 6.9506242, lng: 100.41277989999999 };\r\n    \r\n    var waypts = [7.669402,100.022582]\r\n    \r\n    let request = {\r\n      origin: end,\r\n      destination: end,\r\n      waypoints: [\r\n      {\r\n        location: \"7.0451252, 100.1912893\",\r\n        stopover: true\r\n      },\r\n      {\r\n        location: \"7.003344, 100.326394\",\r\n        stopover: true\r\n      }\r\n    ],\r\n      optimizeWaypoints: true,\r\n      travelMode: 'WALKING'\r\n\r\n    };\r\n\r\n    directionsService.route(request, function (result: any, status: any) {\r\n\r\n      if (status == 'OK') {\r\n        directionsRenderer.setDirections(result);\r\n        let route = result.routes[0];\r\n\r\n        var totalDist = 0;\r\n\r\n        for (let i = 0; i < route.legs.length; i++) {\r\n          console.log('directionService', route.legs[i].distance.text)\r\n          totalDist += route.legs[i].distance.value;\r\n        }\r\n        \r\n\r\n        let dis1 = route.legs[route.legs.length - 1].distance.value / 1000; // distance : km.\r\n        console.log(dis1 + ' km.')\r\n        let weight = 78 // kg.\r\n        let cal = weight * dis1 * 1.036\r\n        console.log(cal.toFixed(2) + \" Kcal\")\r\n      }\r\n    });\r\n    let trafficLayer = new mapsAPI.TrafficLayer();\r\n  }\r\n\r\n  useIonViewDidEnter(() => {\r\n    startGetGPS();\r\n    startWatchGPS();\r\n});\r\n\r\n  const getDirection = async () => {\r\n    console.log('Getting geolocation....');\r\n    setShowLoading(true);\r\n    let position2 = await Geolocation.getCurrentPosition();\r\n    setShowLoading(false);\r\n    setPositionReady(true);\r\n  }\r\n\r\n  const startGetGPS = async () => {\r\n    console.log('Getting geolocation....startGetGPS');\r\n    setShowLoading(true);\r\n    let position1 = await Geolocation.getCurrentPosition();\r\n    setShowLoading(false);\r\n    setPositionReady(true);\r\n    if (startReady == true) {\r\n      setStartPosition({\r\n      lat: position1.coords.latitude,\r\n      lng: position1.coords.longitude,\r\n      acc: position1.coords.accuracy,\r\n      time: position1.timestamp\r\n      })\r\n\r\n      setStartReady(false);\r\n    }\r\n    setCurrentPosition({\r\n      lat: position1.coords.latitude,\r\n      lng: position1.coords.longitude,\r\n      acc: position1.coords.accuracy,\r\n      time: position1.timestamp\r\n    });\r\n    let lat = position1.coords.latitude;\r\n    let lng = position1.coords.longitude;\r\n    \r\n\r\n    console.log('Current startGetGPS', lat, lng);\r\n    \r\n\r\n  }\r\n  const startDistance = async () => {\r\n    console.log('Getting geolocation....startDistance');\r\n    setShowLoading(true);\r\n    let position1 = await Geolocation.getCurrentPosition();\r\n\r\n    setShowLoading(false);\r\n    setPositionReady(true);\r\n\r\n    setCurrentPosition({\r\n      lat: position1.coords.latitude,\r\n      lng: position1.coords.longitude,\r\n      acc: position1.coords.accuracy,\r\n      time: position1.timestamp\r\n    });\r\n\r\n    let lat = position1.coords.latitude;\r\n    let lng = position1.coords.longitude;\r\n}\r\n  const getDistance = async () => {\r\n    console.log('Getting geolocation....getDistance');\r\n    setShowLoading(true);\r\n    let position1 = await Geolocation.getCurrentPosition();\r\n    setShowLoading(false);\r\n    setPositionReady(true);\r\n    setCurrentPosition({\r\n      lat: position1.coords.latitude,\r\n      lng: position1.coords.longitude,\r\n      acc: position1.coords.accuracy,\r\n      time: position1.timestamp\r\n    });\r\n    let lat = position1.coords.latitude;\r\n    let lng = position1.coords.longitude;\r\n    console.log('Stop timestamp', new Date(currentPosition.time), lat, lng);\r\n\r\n\r\n    let googleMap;\r\n    if (positionReady) {\r\n      googleMap = (\r\n        <GoogleMapReact\r\n          bootstrapURLKeys={{ key: 'AIzaSyATDm0MlJIxUXoIU56PIOk3aY26XXs6ul0' }}\r\n          defaultCenter={currentPosition}\r\n          defaultZoom={15}\r\n          yesIWantToUseGoogleMapApiInternals\r\n          onGoogleApiLoaded={({ map, maps }) => { onMapLoad(map, maps) }} >\r\n        </GoogleMapReact>\r\n      )\r\n    }\r\n  }\r\n  let watch1;\r\n  let startWatchGPS = () => {\r\n    console.log('Watching geolocation...startWatchGPS');\r\n    setShowLoading(true);\r\n    watch1 = Geolocation.watchPosition({}, (position, error) => {\r\n      console.log('new position', position);\r\n      setShowLoading(false);\r\n      setPositionReady(true);\r\n      \r\n      setCurrentPosition({\r\n        lat: position.coords.latitude,\r\n        lng: position.coords.longitude,\r\n        acc: position.coords.accuracy,\r\n        time: position.timestamp\r\n      })\r\n    }\r\n    );\r\n  }\r\n\r\n  \r\n\r\n  let findDistance = (lat1: any, lon1: any, lat2: any, lon2: any) => {\r\n    var R = 6373; // km\r\n    var dLat = toRad((lat2 - lat1));\r\n    var dLon = toRad((lon2 - lon1));\r\n    var a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +\r\n      toRad(Math.cos(lat1)) * toRad(Math.cos(lat2)) *\r\n      Math.sin(dLon / 2) * Math.sin(dLon / 2);\r\n    var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n    var d = R * c;\r\n    function toRad(Value: any) {\r\n      /** Converts numeric degrees to radians */\r\n      return Value * Math.PI / 180;\r\n    }\r\n    console.log(\"ระยะทางได้ผลลัพธ์ = \" + d);\r\n    return d;\r\n  };\r\n   \r\n  \r\n  let addZero = (i:any) => {\r\n\r\n    if (i < '10') {\r\n      i = \"0\" + i;\r\n    }\r\n    return i;\r\n  }\r\n\r\n\r\n  let getDatetime = (time:any) => {\r\n    \r\n    let myDate = new Date(time);\r\n    let d = addZero(myDate.getDate());\r\n    let m = addZero(myDate.getMonth());\r\n    let y = myDate.getFullYear();\r\n    let h = addZero(myDate.getHours());\r\n    let min = addZero(myDate.getMinutes());\r\n    let sec = addZero(myDate.getSeconds());\r\n    let times = d +'-' + m +'-'+ y +' '+ h +':' + min + ':' + sec\r\n    console.log('Start Date',times);\r\n    \r\n    \r\n    return times;\r\n  };\r\n\r\n  let duration = (timestart: any, timestop: any) => {\r\n    let time = timestop - timestart;\r\n    let mystartDate = new Date(timestart);\r\n    let mystopDate = new Date(timestop);\r\n    let myDate = new Date(time);\r\n    let d = myDate.getDate();\r\n    let m = myDate.getMonth();\r\n    let y = myDate.getFullYear();\r\n    let h = myDate.getHours();\r\n    let min = myDate.getMinutes();\r\n    let sec = myDate.getSeconds();\r\n    let times = h  + ':' + min + ':' + sec\r\n    console.log('Time Start',mystartDate);\r\n    console.log('Time Stop',mystopDate);\r\n    console.log('Current', h, ':', min, ':', sec);\r\n    console.log(times)\r\n    return times;\r\n  };\r\n\r\n  let calduration = () => {\r\n    let x = duration(1453467965439, 1585492636444);\r\n    console.log(x + \" น.\")\r\n  }\r\n\r\n  let calories = (distance: any, weight: any) => {\r\n\r\n    let cal = (weight * distance * 1.036).toFixed(2)\r\n    console.log(cal + \" Kcal\")\r\n    return cal;\r\n\r\n  };\r\n  let calCalories = () => {\r\n    let x = calories(308, 78);\r\n    console.log(x + \" Kcal.\")\r\n  }\r\n\r\n  let startTextJSX;\r\n\r\n  if (positionReady == true) {\r\n    startTextJSX = <p>{currentPosition.lat},{currentPosition.lng},{currentPosition.time}</p>\r\n  }\r\n  else {\r\n    startTextJSX = <p>กดปุ่มบนขวาเพื่อระบุพิกัดของเครื่อง</p>\r\n  }\r\n  let stopTextJSX;\r\n  let distanceTextJSX;\r\n  let distance;\r\n  \r\n\r\n    distance = findDistance(startPosition.lat,startPosition.lng,currentPosition.lat,currentPosition.lng);\r\n    \r\n    // time = duration(startPosition.time,currentPosition.time);\r\n    let starttime = getDatetime(startPosition.time);\r\n\r\n  if (positionReady == true) {\r\n\r\n\r\n    stopTextJSX = <p>currentPosition = {currentPosition.lat}<br></br>latitude = {currentPosition.lng}<br></br>timestamp = {currentPosition.time}<br></br><br></br>\r\n                Startposition = {startPosition.lat}<br></br>latitude = {startPosition.lng}<br></br>timestamp = {startPosition.time}</p>\r\n    \r\n    \r\n    distanceTextJSX = <p>Distance ={distance}<br></br>Time = {starttime}</p>\r\n  } else {\r\n    stopTextJSX = <p>กดปุ่มบนขวาเพื่อระบุพิกัดของเครื่อง</p>\r\n  }\r\n  let googleMap;\r\n  if (positionReady) {\r\n    googleMap = (\r\n      <GoogleMapReact\r\n        bootstrapURLKeys={{ key: 'AIzaSyATDm0MlJIxUXoIU56PIOk3aY26XXs6ul0' }}\r\n        defaultCenter={currentPosition}\r\n        defaultZoom={15}\r\n        yesIWantToUseGoogleMapApiInternals\r\n        onGoogleApiLoaded={({ map, maps }) => { onMapLoad(map, maps) }} >\r\n      </GoogleMapReact>\r\n    )\r\n  }\r\n  return (\r\n    <IonPage>\r\n      <IonHeader translucent={true}>\r\n        <IonToolbar>\r\n          <IonTitle>Easy Running#1</IonTitle>\r\n          <IonButtons slot=\"end\">\r\n            <IonButton onClick={startWatchGPS}>\r\n              <IonIcon icon={locate} slot=\"icon-only\"></IonIcon>\r\n            </IonButton>\r\n            <IonButton expand=\"full\" color=\"primary\" shape=\"round\" slot=\"start\" size=\"large\" >Start</IonButton>\r\n            <IonButton expand=\"block\" color=\"secondary\" shape=\"round\" slot=\"start\" size=\"large\" >Stop</IonButton>\r\n          </IonButtons>\r\n        </IonToolbar>\r\n      </IonHeader>\r\n      <IonContent>\r\n        <body >\r\n          <div style={{ height: '90vh', width: '100%' }}>\r\n            {/* {startTextJSX} */}\r\n            {stopTextJSX}\r\n            {distanceTextJSX}\r\n            {/* {positionTextJSX} */}\r\n            {/* {googleMap}  */}\r\n            {/* {DistanceTextJSX} */}\r\n          </div>\r\n        </body>\r\n        <IonLoading isOpen={showLoading} message=\"กำลังขอพิกัด\" />\r\n      </IonContent>\r\n    </IonPage>\r\n  );\r\n};\r\nexport default Tab4;"]},"metadata":{},"sourceType":"module"}